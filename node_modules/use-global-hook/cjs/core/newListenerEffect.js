'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var cleanUpListener = require('./cleanUpListener.js');

var newListenerEffect = function newListenerEffect(store, mapState, originalHook) {
  return function () {
    var newListener = {
      oldState: {}
    };
    newListener.run = mapState ? function (newState) {
      var mappedState = mapState(newState);

      if (mappedState !== newListener.oldState) {
        newListener.oldState = mappedState;
        originalHook(mappedState);
      }
    } : originalHook;
    store.listeners.push(newListener);
    return cleanUpListener.cleanUpListener(store, newListener);
  };
};

exports.newListenerEffect = newListenerEffect;
